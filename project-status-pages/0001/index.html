<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目状态页</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f9f9f9; }
        h1 { color: #333; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #4CAF50; color: white; }
        tr:nth-child(even) { background-color: #f2f2f2; }
        tr:hover { background-color: #ddd; }
        .status-进行中 { color: #ff9800; font-weight: bold; }
        .status-已完成 { color: #4CAF50; font-weight: bold; }
        .status-计划中 { color: #2196F3; font-weight: bold; }
        a { display: inline-block; margin-top: 20px; padding: 10px 15px; background-color: #008CBA; color: white; text-decoration: none; border-radius: 4px; }
        a:hover { background-color: #005f73; }
        #status-list { margin-top: 20px; }
        .loading { color: #666; font-style: italic; }
    </style>
</head>
<body>
    <h1>项目状态看板</h1>
    <p>当前项目状态如下（数据从 main.json 动态加载）：</p>
    <div id="status-list" class="loading">加载中...</div>
    <a href="set.html">编辑项目状态</a>
    <script>
        async function loadStatus() {
            try {
                const response = await fetch('main.json');
                if (!response.ok) {
                    throw new Error(`HTTP 错误! 状态码: ${response.status}`);
                }
                const data = await response.json();
                const projects = data.projects;
                displayStatus(projects);
            } catch (error) {
                document.getElementById('status-list').innerHTML = `<p style="color: red;">加载失败: ${error.message}. 请确保 main.json 文件存在且格式正确。</p>`;
            }
        }

        function displayStatus(projects) {
            const container = document.getElementById('status-list');
            if (!projects || projects.length === 0) {
                container.innerHTML = '<p>暂无项目数据。</p>';
                return;
            }
            let html = '<table><tr><th>项目名称</th><th>状态</th><th>描述</th></tr>';
            projects.forEach(proj => {
                html += `<tr>
                    <td><strong>${proj.name || '未命名'}</strong></td>
                    <td class="status-${proj.status || '计划中'}">${proj.status || '计划中'}</td>
                    <td>${proj.description || '无描述'}</td>
                </tr>`;
            });
            html += '</table>';
            container.innerHTML = html;
        }

        // 页面加载时读取数据
        window.addEventListener('DOMContentLoaded', loadStatus);
    </script>
</body>
</html>
